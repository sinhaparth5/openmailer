<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <!-- Database migration files -->
    <!-- Initial tables -->
    <include file="db/changelog/changes/001-create-users-table.xml"/>
    <include file="db/changelog/changes/002-create-email-templates-table.xml"/>
    <include file="db/changelog/changes/003-create-email-campaigns-table.xml"/>

    <!-- Update existing tables with new columns -->
    <include file="db/changelog/changes/004-update-users-table.xml"/>
    <include file="db/changelog/changes/005-update-email-templates-table.xml"/>
    <include file="db/changelog/changes/006-update-email-campaigns-table.xml"/>

    <!-- New tables -->
    <include file="db/changelog/changes/007-create-domains-table.xml"/>
    <include file="db/changelog/changes/008-create-email-providers-table.xml"/>
    <include file="db/changelog/changes/009-create-contact-lists-table.xml"/>
    <include file="db/changelog/changes/010-create-contacts-table.xml"/>
    <include file="db/changelog/changes/011-create-contact-list-memberships-table.xml"/>
    <include file="db/changelog/changes/012-create-segments-table.xml"/>
    <include file="db/changelog/changes/013-create-campaign-recipients-table.xml"/>
    <include file="db/changelog/changes/014-create-campaign-links-table.xml"/>
    <include file="db/changelog/changes/015-create-campaign-clicks-table.xml"/>
    <include file="db/changelog/changes/016-create-api-keys-table.xml"/>
    <include file="db/changelog/changes/017-create-rate-limits-table.xml"/>
    <include file="db/changelog/changes/018-create-email-logs-table.xml"/>
    <include file="db/changelog/changes/019-create-webhook-events-table.xml"/>

    <!-- Add foreign key constraints after all tables are created -->
    <include file="db/changelog/changes/020-add-email-campaigns-foreign-keys.xml"/>

</databaseChangeLog>
