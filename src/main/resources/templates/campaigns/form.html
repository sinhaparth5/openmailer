<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title th:text="${pageTitle}">Create Campaign</title>
</head>
<body>

<main layout:fragment="content" class="container mx-auto px-4 py-8">
    <div class="max-w-5xl mx-auto">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900" th:text="${mode == 'edit'} ? 'Edit Campaign' : 'Create Campaign'">Create Campaign</h1>
                    <p class="mt-2 text-sm text-gray-600">Design and configure your email campaign.</p>
                </div>
                <a href="/campaigns" class="px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 font-medium">
                    Cancel
                </a>
            </div>
        </div>

        <!-- Campaign Form -->
        <form action="/campaigns" method="post" class="space-y-6">
            <!-- Campaign Details Section -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Campaign Details</h2>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Campaign Name -->
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
                            Campaign Name <span class="text-red-500">*</span>
                        </label>
                        <input type="text"
                               id="name"
                               name="name"
                               required
                               th:value="${campaign?.name}"
                               placeholder="e.g., Summer Sale Newsletter"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p class="mt-1 text-sm text-gray-500">Internal name for your reference</p>
                    </div>

                    <!-- Subject Line -->
                    <div>
                        <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">
                            Subject Line <span class="text-red-500">*</span>
                        </label>
                        <input type="text"
                               id="subject"
                               name="subject"
                               required
                               th:value="${campaign?.subject}"
                               placeholder="e.g., Get 50% Off All Summer Items!"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p class="mt-1 text-sm text-gray-500">This will appear in your recipients' inbox</p>
                    </div>

                    <!-- Preview Text -->
                    <div>
                        <label for="previewText" class="block text-sm font-medium text-gray-700 mb-1">
                            Preview Text
                        </label>
                        <input type="text"
                               id="previewText"
                               name="previewText"
                               th:value="${campaign?.previewText}"
                               placeholder="Short preview text shown in email clients"
                               maxlength="100"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p class="mt-1 text-sm text-gray-500">Appears next to the subject line (100 characters max)</p>
                    </div>

                    <!-- From Details -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="fromName" class="block text-sm font-medium text-gray-700 mb-1">
                                From Name <span class="text-red-500">*</span>
                            </label>
                            <input type="text"
                                   id="fromName"
                                   name="fromName"
                                   required
                                   th:value="${campaign?.fromName} ?: 'OpenMailer'"
                                   placeholder="Your Company Name"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="fromEmail" class="block text-sm font-medium text-gray-700 mb-1">
                                From Email <span class="text-red-500">*</span>
                            </label>
                            <input type="email"
                                   id="fromEmail"
                                   name="fromEmail"
                                   required
                                   th:value="${campaign?.fromEmail} ?: 'noreply@openmailer.com'"
                                   placeholder="noreply@example.com"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Reply-To Email -->
                    <div>
                        <label for="replyTo" class="block text-sm font-medium text-gray-700 mb-1">
                            Reply-To Email
                        </label>
                        <input type="email"
                               id="replyTo"
                               name="replyTo"
                               th:value="${campaign?.replyTo}"
                               placeholder="support@example.com"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p class="mt-1 text-sm text-gray-500">Where replies should be sent (optional)</p>
                    </div>
                </div>
            </div>

            <!-- Email Content Section -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Email Content</h2>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Template Selection -->
                    <div>
                        <label for="template" class="block text-sm font-medium text-gray-700 mb-1">
                            Email Template
                        </label>
                        <select id="template"
                                name="template"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Start from scratch</option>
                            <option value="welcome">Welcome Email</option>
                            <option value="newsletter">Newsletter</option>
                            <option value="promotion">Promotional Email</option>
                            <option value="announcement">Announcement</option>
                        </select>
                        <p class="mt-1 text-sm text-gray-500">Choose a template or start from scratch</p>
                    </div>

                    <!-- HTML Editor -->
                    <div>
                        <label for="htmlContent" class="block text-sm font-medium text-gray-700 mb-1">
                            HTML Content <span class="text-red-500">*</span>
                        </label>
                        <textarea id="htmlContent"
                                  name="htmlContent"
                                  required
                                  rows="12"
                                  th:text="${campaign?.htmlContent}"
                                  placeholder="Enter your email HTML content here..."
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"></textarea>
                        <div class="mt-2 flex justify-between items-center">
                            <p class="text-sm text-gray-500">Use HTML to design your email</p>
                            <button type="button"
                                    onclick="alert('Preview functionality coming soon')"
                                    class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
                                Preview
                            </button>
                        </div>
                    </div>

                    <!-- Plain Text Version -->
                    <div>
                        <label for="plainText" class="block text-sm font-medium text-gray-700 mb-1">
                            Plain Text Version
                        </label>
                        <textarea id="plainText"
                                  name="plainText"
                                  rows="6"
                                  th:text="${campaign?.plainText}"
                                  placeholder="Plain text version for email clients that don't support HTML"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"></textarea>
                        <p class="mt-1 text-sm text-gray-500">Fallback for non-HTML email clients (optional)</p>
                    </div>
                </div>
            </div>

            <!-- Recipients Section -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Recipients</h2>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Recipient Type -->
                    <div x-data="{ recipientType: 'segment' }">
                        <label class="block text-sm font-medium text-gray-700 mb-3">
                            Send To <span class="text-red-500">*</span>
                        </label>
                        <div class="space-y-3">
                            <label class="flex items-center">
                                <input type="radio"
                                       name="recipientType"
                                       value="segment"
                                       x-model="recipientType"
                                       checked
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">Send to a segment</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio"
                                       name="recipientType"
                                       value="list"
                                       x-model="recipientType"
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">Send to a contact list</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio"
                                       name="recipientType"
                                       value="all"
                                       x-model="recipientType"
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">Send to all subscribers</span>
                            </label>
                        </div>

                        <!-- Segment Selection -->
                        <div x-show="recipientType === 'segment'" class="mt-4">
                            <label for="segment" class="block text-sm font-medium text-gray-700 mb-1">
                                Select Segment
                            </label>
                            <select id="segment"
                                    name="segment"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Choose a segment...</option>
                                <option value="active">Active Subscribers</option>
                                <option value="new">New Subscribers (Last 30 days)</option>
                                <option value="engaged">Engaged Users</option>
                                <option value="inactive">Inactive Subscribers</option>
                            </select>
                        </div>

                        <!-- List Selection -->
                        <div x-show="recipientType === 'list'" class="mt-4">
                            <label for="list" class="block text-sm font-medium text-gray-700 mb-1">
                                Select Contact List
                            </label>
                            <select id="list"
                                    name="list"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Choose a list...</option>
                                <option value="newsletter">Newsletter Subscribers</option>
                                <option value="customers">Customers</option>
                                <option value="vip">VIP Members</option>
                                <option value="prospects">Prospects</option>
                            </select>
                        </div>

                        <!-- Estimated Recipients -->
                        <div class="mt-4 p-4 bg-blue-50 rounded-md">
                            <div class="flex">
                                <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                </svg>
                                <div class="ml-3">
                                    <p class="text-sm text-blue-700">
                                        This campaign will be sent to approximately <span class="font-semibold">5,234</span> recipients.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Section -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Schedule</h2>
                </div>
                <div class="p-6 space-y-6">
                    <div x-data="{ sendOption: 'now' }">
                        <label class="block text-sm font-medium text-gray-700 mb-3">
                            When to Send <span class="text-red-500">*</span>
                        </label>
                        <div class="space-y-3">
                            <label class="flex items-center">
                                <input type="radio"
                                       name="sendOption"
                                       value="now"
                                       x-model="sendOption"
                                       checked
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">Send immediately</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio"
                                       name="sendOption"
                                       value="schedule"
                                       x-model="sendOption"
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                <span class="ml-2 text-sm text-gray-700">Schedule for later</span>
                            </label>
                        </div>

                        <!-- Schedule Date/Time -->
                        <div x-show="sendOption === 'schedule'" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="scheduleDate" class="block text-sm font-medium text-gray-700 mb-1">
                                    Date
                                </label>
                                <input type="date"
                                       id="scheduleDate"
                                       name="scheduleDate"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="scheduleTime" class="block text-sm font-medium text-gray-700 mb-1">
                                    Time
                                </label>
                                <input type="time"
                                       id="scheduleTime"
                                       name="scheduleTime"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <!-- Timezone -->
                        <div x-show="sendOption === 'schedule'" class="mt-4">
                            <label for="timezone" class="block text-sm font-medium text-gray-700 mb-1">
                                Timezone
                            </label>
                            <select id="timezone"
                                    name="timezone"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="UTC">UTC (Coordinated Universal Time)</option>
                                <option value="America/New_York">Eastern Time (US & Canada)</option>
                                <option value="America/Chicago">Central Time (US & Canada)</option>
                                <option value="America/Denver">Mountain Time (US & Canada)</option>
                                <option value="America/Los_Angeles">Pacific Time (US & Canada)</option>
                                <option value="Europe/London">London</option>
                                <option value="Europe/Paris">Paris</option>
                                <option value="Asia/Tokyo">Tokyo</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tracking & Options -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900">Tracking & Options</h2>
                </div>
                <div class="p-6 space-y-4">
                    <label class="flex items-center">
                        <input type="checkbox"
                               name="trackOpens"
                               checked
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <span class="ml-2 text-sm text-gray-700">Track email opens</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox"
                               name="trackClicks"
                               checked
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <span class="ml-2 text-sm text-gray-700">Track link clicks</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox"
                               name="googleAnalytics"
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <span class="ml-2 text-sm text-gray-700">Add Google Analytics tracking</span>
                    </label>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                <button type="button"
                        onclick="alert('Save as draft functionality coming soon')"
                        class="px-6 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 font-medium">
                    Save as Draft
                </button>
                <div class="flex space-x-3">
                    <a href="/campaigns"
                       class="px-6 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 font-medium">
                        Cancel
                    </a>
                    <button type="submit"
                            class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium">
                        <span th:text="${mode == 'edit'} ? 'Update Campaign' : 'Create Campaign'">Create Campaign</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
</main>

</body>
</html>
